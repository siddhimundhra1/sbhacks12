<!DOCTYPE html>
<html>
<head>
  <title>Passing Notes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&family=Gochi+Hand&family=Indie+Flower&family=Nanum+Pen+Script&family=Shadows+Into+Light&display=swap');
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      background-color: #f5e9d8;
      background-image: 
        radial-gradient(#e0d3b8 1px, transparent 1px),
        radial-gradient(#e0d3b8 1px, transparent 1px);
      background-size: 40px 40px;
      background-position: 0 0, 20px 20px;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      font-family: 'Caveat', cursive;
    }
    
    .notes-container {
      width: 100%;
      max-width: 600px;
      height: 85vh;
      background: #fffef0;
      border-radius: 5px;
      box-shadow: 
        0 10px 30px rgba(0, 0, 0, 0.15),
        inset 0 0 0 1px rgba(255, 255, 255, 0.8);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      position: relative;
      border: 1px solid #d4c9b1;
    }
    
    /* Notebook paper lines */
    .notes-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 60px;
      right: 0;
      bottom: 0;
      background: repeating-linear-gradient(
        #fffef0,
        #fffef0 28px,
        #e0e0e0 28px,
        #e0e0e0 29px
      );
      pointer-events: none;
      opacity: 0.3;
      z-index: 0;
    }
    
    .notes-header {
      background: linear-gradient(to bottom, #8b7355, #6d5c42);
      color: #fffef0;
      padding: 15px 20px;
      text-align: center;
      position: relative;
      z-index: 1;
      border-bottom: 2px solid #5a4a34;
    }
    
    .notes-header h2 {
      font-family: 'Shadows Into Light', cursive;
      font-size: 1.8rem;
      font-weight: 700;
      letter-spacing: 1px;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
    }
    
    .notes-header .status {
      font-family: 'Indie Flower', cursive;
      font-size: 0.9rem;
      opacity: 0.9;
      margin-top: 2px;
    }
    
    .notes-content {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 20px;
      position: relative;
      z-index: 1;
      background: transparent;
    }
    
    .note {
      max-width: 85%;
      padding: 15px 20px;
      line-height: 1.5;
      font-size: 1.3rem;
      position: relative;
      animation: slideIn 0.4s ease;
      word-wrap: break-word;
      border-radius: 3px;
      box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
      transform: rotate(-0.5deg);
      transition: transform 0.2s ease;
    }
    
    .note:hover {
      transform: rotate(0deg) scale(1.01);
    }
    
    @keyframes slideIn {
      from { 
        opacity: 0; 
        transform: translateY(20px) rotate(-2deg); 
      }
      to { 
        opacity: 1; 
        transform: translateY(0) rotate(-0.5deg); 
      }
    }
    
    .user-note {
      background: #e3f2fd;
      align-self: flex-end;
      border-top-right-radius: 0;
      border: 1px solid #bbdefb;
      transform: rotate(0.5deg);
      font-family: 'Nanum Pen Script', cursive;
      font-size: 1.4rem;
      color: #1565c0;
      box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.1);
    }
    
    .user-note:hover {
      transform: rotate(0deg) scale(1.01);
    }
    
    .ai-note {
      background: #fff8e1;
      align-self: flex-start;
      border-top-left-radius: 0;
      border: 1px solid #ffecb3;
      font-family: 'Gochi Hand', cursive;
      font-size: 1.35rem;
      color: #5d4037;
      box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.1);
    }
    
    .note-content {
      margin-bottom: 8px;
      line-height: 1.8;
    }
    
    .note-meta {
      font-family: 'Indie Flower', cursive;
      font-size: 0.9rem;
      opacity: 0.7;
      text-align: right;
      border-top: 1px dashed rgba(0, 0, 0, 0.1);
      padding-top: 5px;
      margin-top: 5px;
    }
    
    .note-meta::before {
      content: '~ ';
    }
    
    /* Pin effect for notes */
    .note::before {
      content: '';
      position: absolute;
      width: 10px;
      height: 10px;
      background: radial-gradient(circle, #fff, #ccc, #999);
      border-radius: 50%;
      top: 10px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
    }
    
    .user-note::before {
      right: 10px;
      background: radial-gradient(circle, #bbdefb, #64b5f6, #1976d2);
    }
    
    .ai-note::before {
      left: 10px;
      background: radial-gradient(circle, #ffecb3, #ffd54f, #ff9800);
    }
    
    .transcript-indicator {
      text-align: center;
      font-family: 'Indie Flower', cursive;
      font-size: 1rem;
      color: #5d4037;
      padding: 10px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 5px;
      margin: 0 20px;
      display: none;
      border: 1px dashed #8d6e63;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      position: relative;
      z-index: 2;
    }
    
    .transcript-indicator.active {
      display: block;
      animation: fadeInUp 0.3s ease;
    }
    
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .typing-indicator {
      display: none;
      align-self: flex-start;
      background: rgba(255, 248, 225, 0.9);
      padding: 15px 20px;
      border-radius: 5px;
      border: 1px solid #ffecb3;
      margin-bottom: 10px;
      font-family: 'Gochi Hand', cursive;
      font-size: 1.2rem;
      color: #5d4037;
      box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
    }
    
    .typing-indicator.active {
      display: block;
    }
    
    .typing-dots {
      display: flex;
      gap: 5px;
    }
    
    .typing-dots span {
      width: 8px;
      height: 8px;
      background: #8d6e63;
      border-radius: 50%;
      animation: handwritingTyping 1.4s infinite;
    }
    
    .typing-dots span:nth-child(2) { animation-delay: 0.2s; }
    .typing-dots span:nth-child(3) { animation-delay: 0.4s; }
    
    @keyframes handwritingTyping {
      0%, 60%, 100% { transform: translateY(0); }
      30% { transform: translateY(-8px); }
    }
    
    .input-area {
      padding: 15px 20px;
      background: rgba(255, 254, 240, 0.95);
      border-top: 2px solid #d4c9b1;
      display: flex;
      gap: 10px;
      align-items: center;
      position: relative;
      z-index: 1;
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
    }
    
    .note-input {
      flex: 1;
      padding: 12px 15px;
      border: 2px solid #d4c9b1;
      border-radius: 5px;
      font-family: 'Nanum Pen Script', cursive;
      font-size: 1.3rem;
      outline: none;
      background: #fffef7;
      color: #5d4037;
      box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.05);
      transition: all 0.3s;
    }
    
    .note-input:focus {
      border-color: #8b7355;
      background: #fff;
      box-shadow: 0 0 0 3px rgba(139, 115, 85, 0.2);
    }
    
    .note-input::placeholder {
      color: #a1887f;
      font-style: italic;
    }
    
    .send-button {
      background: linear-gradient(to bottom, #8b7355, #6d5c42);
      color: #fffef0;
      border: none;
      width: 44px;
      height: 44px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      transition: all 0.2s;
      font-family: 'Shadows Into Light', cursive;
      box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
    }
    
    .send-button:hover {
      transform: scale(1.1) rotate(5deg);
      box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.3);
    }
    
    .send-button:active {
      transform: scale(0.95);
    }
    
    .voice-controls {
      display: flex;
      gap: 10px;
      margin-top: 10px;
      justify-content: center;
      padding: 0 20px 15px;
      background: rgba(255, 254, 240, 0.95);
      position: relative;
      z-index: 1;
    }
    
    .voice-button {
      padding: 10px 20px;
      border: none;
      border-radius: 25px;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s;
      font-family: 'Indie Flower', cursive;
      font-weight: bold;
      letter-spacing: 0.5px;
      box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
    }
    
    .record-button {
      background: linear-gradient(to bottom, #e57373, #d32f2f);
      color: white;
      border: 2px solid #c62828;
    }
    
    .record-button.recording {
      animation: pulse 1.5s infinite;
      background: linear-gradient(to bottom, #f44336, #b71c1c);
      box-shadow: 0 0 10px rgba(244, 67, 54, 0.5);
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    .stop-button {
      background: linear-gradient(to bottom, #78909c, #455a64);
      color: white;
      border: 2px solid #37474f;
    }
    
    .stop-button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none !important;
    }
    
    .voice-button:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.3);
    }
    
    /* Quiz styling */
    .quiz-note {
      background: #f3e5f5;
      border: 1px solid #ce93d8;
      font-family: 'Gochi Hand', cursive;
    }
    
    .quiz-note::before {
      background: radial-gradient(circle, #f3e5f5, #ce93d8, #8e24aa);
    }
    
    .quiz-question {
      margin-bottom: 10px;
      font-weight: bold;
    }
    
    .quiz-options {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 10px;
    }
    
    .quiz-option {
      padding: 8px 12px;
      border: 1px solid #ba68c8;
      border-radius: 3px;
      background: #f3e5f5;
      cursor: pointer;
      transition: all 0.2s;
      font-family: 'Nanum Pen Script', cursive;
      font-size: 1.2rem;
    }
    
    .quiz-option:hover {
      background: #e1bee7;
      transform: translateX(5px);
    }
    
    .quiz-option.correct {
      background: #c8e6c9;
      border-color: #4caf50;
      color: #1b5e20;
    }
    
    .quiz-option.incorrect {
      background: #ffcdd2;
      border-color: #f44336;
      color: #b71c1c;
    }
    
    /* Scrollbar styling */
    .notes-content::-webkit-scrollbar {
      width: 8px;
    }
    
    .notes-content::-webkit-scrollbar-track {
      background: rgba(212, 201, 177, 0.3);
      border-radius: 4px;
    }
    
    .notes-content::-webkit-scrollbar-thumb {
      background: linear-gradient(to bottom, #8b7355, #6d5c42);
      border-radius: 4px;
    }
    
    .notes-content::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(to bottom, #6d5c42, #5a4a34);
    }
    
    /* Tear effect at top of notes */
    .notes-content::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 15px;
      background: linear-gradient(to right, 
        transparent 0%, 
        rgba(212, 201, 177, 0.5) 10%, 
        rgba(212, 201, 177, 0.5) 90%, 
        transparent 100%);
      z-index: 1;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      body {
        padding: 10px;
        height: 100vh;
      }
      
      .notes-container {
        height: 90vh;
        max-width: 100%;
      }
      
      .note {
        max-width: 90%;
        font-size: 1.2rem;
      }
      
      .voice-controls {
        flex-direction: column;
        align-items: center;
      }
      
      .voice-button {
        width: 100%;
        max-width: 200px;
      }
    }
    
    @media (max-width: 480px) {
      .notes-header h2 {
        font-size: 1.5rem;
      }
      
      .note {
        max-width: 95%;
        padding: 12px 15px;
      }
      
      .note-input {
        font-size: 1.2rem;
        padding: 10px 12px;
      }
      
      .notes-container::before {
        left: 40px;
      }
    }
  </style>
</head>
<body>
  <div class="notes-container">
    <div class="notes-header">
      <h2>üìù Passing Notes</h2>
      <div class="status">Whispering with Gemini AI ‚Ä¢ Class is in session</div>
    </div>
    
    <div class="transcript-indicator" id="transcriptIndicator">
      ‚úèÔ∏è Recording lecture notes...
    </div>
    
    <div class="notes-content" id="notesContent">
      <!-- Notes will appear here -->
      <div class="note ai-note">
        <div class="note-content">
          Hi there! I'm here to help you take notes. You can type questions or record your lecture, and I'll help summarize and quiz you on it. What would you like to chat about?
        </div>
        <div class="note-meta">Gemini ‚Ä¢ Just now</div>
      </div>
    </div>
    
    <div class="typing-indicator" id="typingIndicator">
      <div class="typing-dots">
        <span></span>
        <span></span>
        <span></span>
      </div>
      <div style="margin-left: 10px;">Thinking...</div>
    </div>
    
    <div class="input-area">
      <input type="text" class="note-input" id="noteInput" placeholder="Write your note here..." autocomplete="off">
      <button class="send-button" id="sendBtn">‚úèÔ∏è</button>
    </div>
    
    <div class="voice-controls">
      <button class="voice-button record-button" id="startVoiceBtn">üé§ Start Recording Lecture</button>
      <button class="voice-button stop-button" id="stopVoiceBtn" disabled>‚èπÔ∏è Stop & Process</button>
    </div>
  </div>

  <script>
    const notesContent = document.getElementById("notesContent");
    const noteInput = document.getElementById("noteInput");
    const sendBtn = document.getElementById("sendBtn");
    const startVoiceBtn = document.getElementById("startVoiceBtn");
    const stopVoiceBtn = document.getElementById("stopVoiceBtn");
    const transcriptIndicator = document.getElementById("transcriptIndicator");
    const typingIndicator = document.getElementById("typingIndicator");

    // -------------------- Utility Functions --------------------
    function formatTime() {
      const now = new Date();
      const timeStr = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      const dateStr = now.toLocaleDateString([], { month: 'short', day: 'numeric' });
      return `${timeStr} ‚Ä¢ ${dateStr}`;
    }

    function addNote(text, isUser = false, metadata = null) {
      const noteDiv = document.createElement("div");
      noteDiv.className = `note ${isUser ? 'user-note' : 'ai-note'}`;
      
      const contentDiv = document.createElement("div");
      contentDiv.className = "note-content";
      contentDiv.textContent = text;
      
      const metaDiv = document.createElement("div");
      metaDiv.className = "note-meta";
      
      if (metadata) {
        metaDiv.textContent = metadata;
      } else {
        metaDiv.textContent = isUser ? "You ‚Ä¢ " + formatTime() : "Gemini ‚Ä¢ " + formatTime();
      }
      
      noteDiv.appendChild(contentDiv);
      noteDiv.appendChild(metaDiv);
      
      notesContent.appendChild(noteDiv);
      notesContent.scrollTop = notesContent.scrollHeight;
    }

    function showTypingIndicator(show) {
      typingIndicator.classList.toggle("active", show);
      if (show) {
        notesContent.scrollTop = notesContent.scrollHeight;
      }
    }

    // -------------------- Speech Recognition --------------------
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = "en-US";
    recognition.continuous = true;
    recognition.interimResults = true;

    let transcriptBuffer = "";
    let fullLectureTranscript = ""; 
    let isRecording = false;

    recognition.onresult = (event) => {
      let newText = "";
      
      for (let i = event.resultIndex; i < event.results.length; i++) {
        const transcript = event.results[i][0].transcript;
        if (event.results[i].isFinal) {
          newText += transcript + " ";
        }
      }

      if (newText) {
        transcriptBuffer += newText;
        fullLectureTranscript += newText;

        if (!transcriptIndicator.classList.contains("active")) {
          transcriptIndicator.classList.add("active");
        }
        // Update indicator with transcript preview
        const preview = transcriptBuffer.length > 100 
          ? transcriptBuffer.substring(0, 100) + "..."
          : transcriptBuffer;
        transcriptIndicator.textContent = `‚úèÔ∏è Recording: ${preview}`;
      }
    };

    recognition.onstart = () => {
      console.log("Recording started");
      isRecording = true;
      startVoiceBtn.classList.add("recording");
      startVoiceBtn.textContent = "üî¥ Recording Lecture...";
      transcriptIndicator.textContent = "üé§ Listening to lecture...";
      transcriptIndicator.classList.add("active");
    };

    recognition.onend = () => {
      console.log("Recording ended");
      startVoiceBtn.classList.remove("recording");
      startVoiceBtn.textContent = "üé§ Start Recording Lecture";
      
      if (isRecording) {
        setTimeout(() => {
          try {
            recognition.start();
          } catch (e) {
            console.warn("Restart failed:", e);
          }
        }, 200);
      } else {
        startVoiceBtn.disabled = false;
        stopVoiceBtn.disabled = true;
        transcriptIndicator.classList.remove("active");
      }
    };

    recognition.onerror = (event) => {
      console.error("Speech recognition error:", event.error);
      transcriptIndicator.textContent = `Error: ${event.error}`;
      setTimeout(() => {
        transcriptIndicator.classList.remove("active");
      }, 3000);
      isRecording = false;
      startVoiceBtn.disabled = false;
      stopVoiceBtn.disabled = true;
    };

    startVoiceBtn.addEventListener("click", () => {
      if (isRecording) return;
      
      try {
        isRecording = true;
        transcriptBuffer = "";
        recognition.start();
        startVoiceBtn.disabled = true;
        stopVoiceBtn.disabled = false;
      } catch (e) {
        console.error("Failed to start recording:", e);
        isRecording = false;
        startVoiceBtn.disabled = false;
        alert("Please allow microphone access to record lectures.");
      }
    });

    stopVoiceBtn.addEventListener("click", () => {
      if (!isRecording) return;
      
      isRecording = false;
      recognition.stop();
      startVoiceBtn.disabled = false;
      stopVoiceBtn.disabled = true;
      
      // Process the transcript
      setTimeout(async () => {
        if (transcriptBuffer.trim()) {
        await sendSummary(transcriptBuffer);
        transcriptBuffer = "";
      }

      await generateQuiz(fullLectureTranscript);

        transcriptIndicator.classList.remove("active");
      }, 500);
    });

    // -------------------- Summary sender --------------------
    async function sendSummary(chunk) {
      if (!transcriptBuffer.trim()) {
        transcriptIndicator.classList.remove("active");
        return;
      }

      addNote(transcriptBuffer, true, "Lecture notes ‚Ä¢ " + formatTime());
      showTypingIndicator(true);
      transcriptIndicator.classList.remove("active");

      try {
        const res = await fetch("http://127.0.0.1:5000/summary", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            full_text: fullLectureTranscript,
            new_chunk: chunk
          })

        });

        showTypingIndicator(false);

        if (!res.ok) {
          throw new Error(`HTTP ${res.status}`);
        }

        const data = await res.json();
        addNote(data.reply, false, "Summary ‚Ä¢ " + formatTime());

      } catch (err) {
        showTypingIndicator(false);
        addNote(`Oops, I ran into an issue: ${err.message}`, false, "Error ‚Ä¢ " + formatTime());
        console.error("Summary error:", err);
      }
    }

    // -------------------- Quiz Creator --------------------
    async function generateQuiz(transcript) {
      if (!transcript.trim()) return;

      showTypingIndicator(true);

      try {
        const res = await fetch("http://127.0.0.1:5000/quiz", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ text: transcript })
        });

        showTypingIndicator(false);

        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const data = await res.json();

        if (data.error) {
          addNote("Quiz didn't work out: " + data.error, false, "Oops ‚Ä¢ " + formatTime());
          console.error(data);
          return;
        }

        addNote("üìö Pop quiz from today's notes!", false, "Quiz Time! ‚Ä¢ " + formatTime());

        // Render quiz
        const quizData = data.quiz || [];
        quizData.forEach((q, idx) => {
          const quizNote = document.createElement("div");
          quizNote.className = "note quiz-note";
          
          const questionDiv = document.createElement("div");
          questionDiv.className = "quiz-question";
          questionDiv.textContent = `Q${idx + 1}: ${q.question}`;
          questionDiv.style.fontSize = "1.3rem";
          questionDiv.style.marginBottom = "15px";
          
          const optionsDiv = document.createElement("div");
          optionsDiv.className = "quiz-options";
          
          const options = q.options || ["A", "B", "C", "D"];
          const answer = q.answer || "A";
          
          options.forEach(option => {
            const optionBtn = document.createElement("button");
            optionBtn.className = "quiz-option";
            optionBtn.textContent = option;
            
            optionBtn.addEventListener("click", () => {
              // Disable all options
              optionsDiv.querySelectorAll('.quiz-option').forEach(btn => {
                btn.disabled = true;
                btn.style.cursor = "default";
              });
              
              if (option === answer) {
                optionBtn.classList.add("correct");
                optionBtn.innerHTML = `‚úì ${option} (Correct!)`;
              } else {
                optionBtn.classList.add("incorrect");
                optionBtn.innerHTML = `‚úó ${option}`;
                
                // Highlight correct answer
                optionsDiv.querySelectorAll('.quiz-option').forEach(btn => {
                  if (btn.textContent.includes(answer) || btn.textContent === answer) {
                    btn.classList.add("correct");
                    btn.innerHTML = `‚úì ${answer} (Correct answer)`;
                  }
                });
              }
            });
            
            optionsDiv.appendChild(optionBtn);
          });
          
          quizNote.appendChild(questionDiv);
          quizNote.appendChild(optionsDiv);
          
          const metaDiv = document.createElement("div");
          metaDiv.className = "note-meta";
          metaDiv.textContent = `Question ${idx + 1} of ${quizData.length}`;
          quizNote.appendChild(metaDiv);
          
          notesContent.appendChild(quizNote);
          notesContent.scrollTop = notesContent.scrollHeight;
        });

      } catch (err) {
        showTypingIndicator(false);
        addNote(`Quiz didn't load: ${err.message}`, false, "Error ‚Ä¢ " + formatTime());
        console.error("Quiz error:", err);
      }
    }

    // -------------------- Auto-summary every 30 seconds --------------------
    setInterval(() => {
  if (transcriptBuffer.trim() && isRecording) {
    (async () => {
      await sendSummary(transcriptBuffer);
      transcriptBuffer = "";
    })();
  }
}, 15000);


    // -------------------- Manual notes --------------------
    async function sendNote() {
      const noteText = noteInput.value.trim();
      if (!noteText) return;

      addNote(noteText, true);
      noteInput.value = "";
      showTypingIndicator(true);

      try {
        const res = await fetch("http://127.0.0.1:5000/send", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          text: noteText,
          full_text: fullLectureTranscript
        })
      });


        showTypingIndicator(false);

        if (!res.ok) {
          throw new Error(`HTTP ${res.status}`);
        }

        const data = await res.json();
        addNote(data.reply, false);

      } catch (err) {
        showTypingIndicator(false);
        addNote(`Hmm, something went wrong: ${err.message}`, false, "Error ‚Ä¢ " + formatTime());
        console.error("Note error:", err);
      }
    }

    sendBtn.addEventListener("click", sendNote);
    noteInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        sendNote();
      }
    });

    // Focus input on load
    noteInput.focus();
    
    // Add some random rotation to existing notes for realistic look
    document.querySelectorAll('.note').forEach(note => {
      const randomRotate = (Math.random() * 2) - 1; // -1 to 1 degrees
      note.style.transform = `rotate(${randomRotate}deg)`;
    });
  </script>
</body>
</html>
